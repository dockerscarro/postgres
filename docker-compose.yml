version: "3.9"

services:
  hubspot_sync:
    build: .
    container_name: hubspot_sync
    restart: "no"  # run once per deployment
    environment:
      HUBSPOT_API_KEY: ${HUBSPOT_API_KEY}
      POSTGRES_HOST: postgres-hubspot   # existing container name
      POSTGRES_PORT: 5432
      POSTGRES_DB: hubspot_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    networks:
      - hubspot-network  # same network as Postgres

networks:
  hubspot-network:
    external: true
